<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Ajax和jQuery | Moon</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Moon">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Moon</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2017-02-16T13:36:55.000Z" itemprop="datePublished">
          2017-02-16
      </time>
    
</span>
    <h1 class="post-title">Ajax和jQuery</h1>
    <section class="post-content">
      <blockquote>
<p>封装的全过程</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax_tool</span>(<span class="params">type,url,success,data</span>)</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 1.创建</span></div><div class="line"></div><div class="line"> <span class="keyword">var</span> ajax = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"></div><div class="line"> <span class="comment">// 如果是get 才需要修改url</span></div><div class="line"></div><div class="line"> <span class="keyword">if</span>(type==<span class="string">'get'</span>)&#123;</div><div class="line"></div><div class="line"> <span class="keyword">if</span>(data)&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 修改url</span></div><div class="line"></div><div class="line"> url+=<span class="string">'?'</span>;</div><div class="line"></div><div class="line"> url+=data;</div><div class="line"></div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="comment">// 2.设置</span></div><div class="line"></div><div class="line"> ajax.open(type,url);</div><div class="line"></div><div class="line"> <span class="comment">// 3.发送</span></div><div class="line"></div><div class="line"> ajax.send();</div><div class="line"></div><div class="line"> &#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 进入到这里 说明是post请求</span></div><div class="line"></div><div class="line"> <span class="comment">// 2.设置</span></div><div class="line"></div><div class="line"> ajax.open(type,url);</div><div class="line"></div><div class="line"> <span class="comment">// 如果data有内容</span></div><div class="line"></div><div class="line"> <span class="keyword">if</span>(data)&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 设置请求头 如果使用post不发送数据 那么 下面这行代码 不是必须的</span></div><div class="line"></div><div class="line"> ajax.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line"></div><div class="line"> <span class="comment">// 3.发送</span></div><div class="line"></div><div class="line"> <span class="comment">// post请求数据 在send中发送</span></div><div class="line"></div><div class="line"> <span class="comment">// 格式 key=value&amp;key2=value2</span></div><div class="line"></div><div class="line"> ajax.send(data);</div><div class="line"></div><div class="line"> &#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 3.发送</span></div><div class="line"></div><div class="line"> ajax.send();</div><div class="line"></div><div class="line"> &#125;&#125;</div><div class="line"></div><div class="line"> <span class="comment">// 4.注册</span></div><div class="line"></div><div class="line"> ajax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 5.判断并使用</span></div><div class="line"></div><div class="line"> <span class="keyword">if</span>(ajax.status==<span class="number">200</span> &amp;&amp;ajax.readyState ==<span class="number">4</span>)&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 获取数据 要把数据给传递出去</span></div><div class="line"></div><div class="line"><span class="comment">// console.log(ajax.responseText);</span></div><div class="line"></div><div class="line"> <span class="comment">// 传入一个叫做 success的函数</span></div><div class="line"></div><div class="line"> success(ajax.responseText);</div><div class="line"></div><div class="line"><span class="comment">// return ajax.responseText;</span></div><div class="line"></div><div class="line"> &#125;</div><div class="line"></div><div class="line"> &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 修改工具函数 只接受一个参数 对象</span></div><div class="line"></div><div class="line">    参数</div><div class="line"></div><div class="line">     type:<span class="string">"请求方法"</span></div><div class="line"></div><div class="line">     url:请求的url</div><div class="line"></div><div class="line">     success:请求成功的回调函数</div><div class="line"></div><div class="line">     data:发送的数据</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax_tool_plus</span>(<span class="params">option</span>)</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 1.创建</span></div><div class="line"></div><div class="line"> <span class="keyword">var</span> ajax = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"></div><div class="line"> <span class="comment">// 如果是get 才需要修改url</span></div><div class="line"></div><div class="line"> <span class="keyword">if</span>(option.type==<span class="string">'get'</span>)&#123;</div><div class="line"></div><div class="line"> <span class="keyword">if</span>(option.data)&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 修改url</span></div><div class="line"></div><div class="line"> option.url+=<span class="string">'?'</span>;</div><div class="line"></div><div class="line"> option.url+=option.data;</div><div class="line"></div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="comment">// 2.设置</span></div><div class="line"></div><div class="line"> ajax.open(option.type,option.url);</div><div class="line"></div><div class="line"> <span class="comment">// 3.发送</span></div><div class="line"></div><div class="line"> ajax.send();</div><div class="line"></div><div class="line"> &#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line"> ajax.open(option.type,option.url);</div><div class="line"></div><div class="line"> <span class="keyword">if</span>(option.data)&#123;</div><div class="line"></div><div class="line"> ajax.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line"></div><div class="line"> ajax.send(option.data);</div><div class="line"></div><div class="line"> &#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 3.发送</span></div><div class="line"></div><div class="line"> ajax.send();</div><div class="line"></div><div class="line"> &#125; &#125;</div><div class="line"></div><div class="line"> <span class="comment">// 4.注册</span></div><div class="line"></div><div class="line"> ajax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 5.判断并使用</span></div><div class="line"></div><div class="line"> <span class="keyword">if</span>(ajax.status==<span class="number">200</span> &amp;&amp;ajax.readyState ==<span class="number">4</span>)&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 传入一个叫做 success的函数</span></div><div class="line"></div><div class="line"> option.success(ajax.responseText);</div><div class="line"></div><div class="line"> <span class="keyword">return</span> ajax.responseText;</div><div class="line"></div><div class="line"> &#125;&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="兼容IE6"><a href="#兼容IE6" class="headerlink" title="兼容IE6-"></a>兼容IE6-</h3><h3 id="经验大师"><a href="#经验大师" class="headerlink" title="经验大师"></a>经验大师</h3><ul>
<li><p>兼容 ie5&amp;ie6的写法`仅仅只是创建的方式不同</p>
</li>
<li><p>面试的问题 经常出现</p>
</li>
<li><p>咱们公司做的项目 需要兼容ie几?</p>
</li>
<li><p>现在的项目老版本的ie 一般是 内部项目 医院项目 工厂项目 政府项目</p>
</li>
<li><p>如果做过内部项目 业务内容 提升较大</p>
</li>
<li><p>用不了教新的技术</p>
</li>
</ul>
<h3 id="兼容IE6-版本的方法"><a href="#兼容IE6-版本的方法" class="headerlink" title="兼容IE6-版本的方法"></a>兼容IE6-版本的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> ajax = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"></div><div class="line"> <span class="keyword">if</span>(ajax==<span class="literal">null</span>)&#123;</div><div class="line"></div><div class="line"> ajax = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h2 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h2><ul>
<li><p>同步:需要等待 前面的事情干完 比如排队打饭 排队取钱</p>
<ul>
<li><p>在ajax.open() 的第三个参数中传入false即是同步，不建议这样用。</p>
<p>降低效率~</p>
</li>
<li><p>作为面试的考点 可能被问到</p>
</li>
</ul>
</li>
<li><p>异步:在不影响 主要流程的情况下 干其他的事情</p>
<ul>
<li><p>在ajax.open() 的第三个参数中传入true即是同步，建议这样用。</p>
<p>实际工作中 基本都是使用异步</p>
</li>
</ul>
</li>
<li><p>小细节：如果使用了同步，onreadystatechange不会执行。因为在send()方法中就已经执行完了</p>
</li>
</ul>
<h2 id="JS与JSON-的相互转化"><a href="#JS与JSON-的相互转化" class="headerlink" title="JS与JSON 的相互转化"></a>JS与JSON 的相互转化</h2><ul>
<li><p>JS对象转JSON字符串使用 obj.stringify() 方法。</p>
</li>
<li><p>JSON字符串转成JS对象则使用 obj.parse() 方法。</p>
</li>
<li><p>JSON字符串转成JS对象还可以使用eval()方法，但是需要在传入的参数两边加上() 这就比较恶心~</p>
<blockquote>
<p>比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&gt; var result = eval(&apos;(&apos;+jsonString+&apos;)&apos;);</div><div class="line"></div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h2 id="JQueryAjax使用"><a href="#JQueryAjax使用" class="headerlink" title="JQueryAjax使用"></a>JQueryAjax使用</h2><ul>
<li><p>与之前封装的工具函数一样，JQ中的功能更加强大</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line"></div><div class="line">   <span class="attr">url</span>:<span class="string">'01.jq_get.php'</span>,</div><div class="line"></div><div class="line">   <span class="attr">type</span>:<span class="string">'get'</span>,</div><div class="line"></div><div class="line">   <span class="attr">data</span>:<span class="string">'name=jack&amp;age=18'</span>,</div><div class="line"></div><div class="line">   <span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">backData</span>)</span>&#123;</div><div class="line"></div><div class="line">       <span class="built_in">console</span>.log(backData)</div><div class="line"></div><div class="line">   &#125;,</div><div class="line"></div><div class="line">   <span class="attr">beforeSend</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'请求发送之前调用'</span>);</div><div class="line"></div><div class="line">   &#125;,</div><div class="line"></div><div class="line">   <span class="attr">complete</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'complete 请求结束不管成功失败'</span>);</div><div class="line"></div><div class="line">   &#125;,</div><div class="line"></div><div class="line">   <span class="attr">error</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'请求失败后调用'</span>);</div><div class="line"></div><div class="line">   &#125;</div><div class="line"></div><div class="line">   &#125;)</div><div class="line"></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>注意各个参数的使用，JQ手册上都有的~</p>
</li>
<li><p>额外比较重要的属性</p>
<ul>
<li><p>beforeSend 在请求之前调用</p>
</li>
<li><p>complete 请求完成，不管结果</p>
</li>
<li><p>error 请求完成，失败后执行</p>
</li>
<li><p>dataType 可以传入需要解析的格式 如JSON； 内部帮我们完成了parse()的工作，并且考虑了兼容性的问题。</p>
</li>
<li><p>serialize 提供的快速获取 form 表单中 拥有 name 属性的表单元素的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$(<span class="string">'#Form'</span>).serialize();</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="PHP中-对象-与-JSON字符串的相互转换"><a href="#PHP中-对象-与-JSON字符串的相互转换" class="headerlink" title="PHP中 对象 与 JSON字符串的相互转换"></a>PHP中 对象 与 JSON字符串的相互转换</h2><ul>
<li>解码 不懂得 -&gt;懂得 string-&gt;php中的对象 <strong> 参数1为 需要解码的字符串</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">参数2 true 会转化成关系型数组</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">json_decode($json);</div></pre></td></tr></table></figure>
<ul>
<li>编码 懂得-&gt;不懂得</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">json_encode($value);</div></pre></td></tr></table></figure>
<h3 id="在PHP中设置返回值为JSON"><a href="#在PHP中设置返回值为JSON" class="headerlink" title="在PHP中设置返回值为JSON"></a>在PHP中设置返回值为JSON</h3><p><strong>header(‘content-type:application\/json;charset=utf-8’);</strong></p>
<ul>
<li>这样在HTML中就不用parse方法转换成对象啦</li>
</ul>
<hr>
<h2 id="模板引擎-！important"><a href="#模板引擎-！important" class="headerlink" title="模板引擎 ！important"></a>模板引擎 ！important</h2><blockquote>
<p>步骤：</p>
</blockquote>
<ul>
<li><p>导入JQ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;script src=&quot;js/jquery.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>模板引擎使用步骤1 导入模板引擎</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;script src=<span class="string">"js/template-native.js"</span> type=<span class="string">"text/javascript"</span> charset=<span class="string">"utf-8"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>模板引擎使用步骤2 准备模板</p>
<ol>
<li><p>一定添加id属性</p>
</li>
<li><p>将需要替换的值替换成 该模板要求的参数 例如&lt;%= name %&gt; 酱紫~</p>
</li>
<li><p>script标签中的type属性一定要写，而且不要写成JavaScript</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> &lt;ul&gt;</div><div class="line"></div><div class="line">   &lt;li&gt;&lt;%=name%&gt;&lt;/li&gt;</div><div class="line"></div><div class="line">   &lt;li&gt;&lt;%=age%&gt;&lt;/li&gt;</div><div class="line"></div><div class="line">   &lt;li&gt;&lt;%=skill%&gt;&lt;/li&gt;</div><div class="line"></div><div class="line">&lt;<span class="regexp">/ul&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>模板引擎使用步骤3 完成填充工作</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">template(<span class="string">'template'</span>,backData);</div></pre></td></tr></table></figure>
<h3 id="模板引擎的原理"><a href="#模板引擎的原理" class="headerlink" title="模板引擎的原理"></a>模板引擎的原理</h3><ul>
<li><p>获取 script中的文本值 string</p>
</li>
<li><p>使用正则表达式 查找占位的内容</p>
</li>
<li><p>配合对象的属性名 进行替换</p>
</li>
<li><p>返回的就是 替换完毕的结果</p>
</li>
</ul>
<blockquote>
<p>自己封装的简单模板</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 参数1 模板标签的id</span></div><div class="line"></div><div class="line"><span class="comment">// 参数2 对象</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">template_plus</span>(<span class="params">id,data</span>)</span>&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 获取 模板的内部的字符串</span></div><div class="line"></div><div class="line">     <span class="keyword">var</span> mystring = <span class="built_in">document</span>.getElementById(id).innerHTML;</div><div class="line"></div><div class="line"> <span class="comment">// 2.正则</span></div><div class="line"></div><div class="line">     <span class="keyword">var</span> reg = <span class="regexp">/&lt;%=(\w+)%&gt;/</span>;</div><div class="line"></div><div class="line">     <span class="keyword">var</span> result;</div><div class="line"></div><div class="line"> <span class="comment">// 先执行 括号内部的代码</span></div><div class="line"></div><div class="line">     <span class="keyword">while</span>(result = reg.exec(mystring))&#123;</div><div class="line"></div><div class="line"> <span class="comment">// 字符串的 替换方法</span></div><div class="line"></div><div class="line"> <span class="comment">// 参数1 替换的内容</span></div><div class="line"></div><div class="line"> <span class="comment">// 参数2 更换的值</span></div><div class="line"></div><div class="line">     mystring = mystring.replace(result[<span class="number">0</span>],data[result[<span class="number">1</span>]]);</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line"> <span class="comment">// 如果代码能够执行到这里</span></div><div class="line"></div><div class="line">     <span class="keyword">return</span> mystring;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>lgbiao</h4>
    <p>不想做记者的编辑不是一个好的前端工程师</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?title=不想做记者的编辑不是一个好的前端工程师 ?url=http://yoursite.com/2017/02/16/Ajax和jQuery/" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://yoursite.com/2017/02/16/Ajax和jQuery/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2017/02/16/Ajax和jQuery/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://yoursite.com/2017/02/16/Ajax和jQuery/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2017/02/16/原型与instansof/">
        ← 原型与instansof
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/2017/02/16/JavaScript高级/">
        JavaScript高级 →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Moon</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
